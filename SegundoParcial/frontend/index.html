<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Simulacro Examen - Mapa</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h1>Mi Mapa (Simulacro)</h1>
            <button onclick="logout()" style="background-color: #dc3545;">Cerrar SesiÃ³n</button>
        </div>

        <div
            style="background:#e9ecef; padding:15px; margin-bottom:15px; border-radius:8px; border: 1px solid #ced4da;">
            <h3>ğŸ•µï¸â€â™€ï¸ Modo Visita</h3>
            <div style="display:flex; gap:10px;">
                <input type="text" id="emailBusqueda" placeholder="Email del usuario a visitar" style="flex:1;">
                <button onclick="verUsuario()" style="background:#17a2b8;">Ver Mapa</button>
                <button onclick="verMio()" style="background:#6c757d;">Volver a mi Mapa</button>
            </div>
        </div>

        <div id="map"></div>

        <div class="form-box" id="caja-crear">
            <h3>AÃ±adir Nuevo Lugar</h3>
            <input type="text" id="nombre" placeholder="Nombre de Ciudad o PaÃ­s" required>

            <button onclick="autocompletarCoords()"
                style="background:#ffc107; color:black; margin-bottom:10px; font-weight:bold;">
                ğŸ“ Buscar Coordenadas AutomÃ¡ticas
            </button>

            <input type="text" id="descripcion" placeholder="DescripciÃ³n breve">
            <label style="display: block; margin-top: 10px;">Foto:</label>
            <input type="file" id="imagen" accept="image/*">
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="lat" placeholder="Latitud" readonly>
                <input type="text" id="lng" placeholder="Longitud" readonly>
            </div>
            <button onclick="crearLugar()" style="width: 100%; margin-top: 10px; background-color: #28a745;">Guardar
                Lugar</button>
        </div>

        <div id="seccion-visitas"
            style="margin-top:20px; border:1px solid #ccc; padding:15px; border-radius:8px; background-color:#fff3cd;">
            <h3>ğŸ‘€ Historial de Visitas Recibidas</h3>
            <ul id="ul-visitas" style="padding-left:20px;">
                <li>Cargando visitas...</li>
            </ul>
        </div>

        <div id="lista-lugares" style="margin-top:20px;">
            <p>Cargando lugares...</p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
    <script>
        window.onload = function () {
            checkAuth();
            initMap();
            cargarLugares(); // Carga mis lugares por defecto
            cargarHistorialVisitas(); // Carga quiÃ©n me ha visitado
        };
    </script>
</body>

</html>